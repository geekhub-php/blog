!function(o){images=[];var i=0;o.fn.Chocolat=function(n){function t(e){return n.currentImage=e.data.i,n.setIndex=e.data.id,n.setTitle=e.data.nom,n.lastImage=images[n.setIndex].length-1,r(),!1}function a(){I(),n.container.append('<div id="Choco_overlay"></div><div id="Choco_content"><div id="Choco_close"></div><div id="Choco_loading"></div><div id="Choco_container_photo"><img id="Choco_bigImage" src="" /></div><div id="Choco_container_description"><span id="Choco_container_title"></span><span id="Choco_container_via"></span></div><div id="Choco_left_arrow" class="Choco_arrows"></div><div id="Choco_right_arrow" class="Choco_arrows"></div></div>'),o("#Choco_left_arrow").css("background-image","url("+n.leftImg+")"),o("#Choco_right_arrow").css("background-image","url("+n.rightImg+")"),o("#Choco_close").css("background-image","url("+n.closeImg+")"),o("#Choco_loading").css("background-image","url("+n.loadingImg+")"),"body"!==n.container.get(0).nodeName.toLowerCase()&&(n.container.css({position:"relative",overflow:"hidden","line-height":"normal"}),o("#Choco_content").css("position","relative"),o("#Choco_overlay").css("position","absolute")),o(document).unbind("keydown").bind("keydown",function(e){switch(e.keyCode){case 37:d(-1);break;case 39:d(1);break;case 27:f()}}),n.vache&&o("#Choco_overlay").click(function(){return f(),!1}),o("#Choco_left_arrow").unbind().bind("click",function(){return d(-1),!1}),o("#Choco_right_arrow").unbind().bind("click",function(){return d(1),!1}),o("#Choco_close").unbind().bind("click",function(){return f(),!1}),o(window).resize(function(){c(n.currentImage,!0)})}function r(){a(),c(n.currentImage,!1),o("#Choco_overlay").css({"background-color":n.overlayColor,opacity:n.overlayOpacity}).fadeIn(n.fadeInOverlayduration),o("#Choco_content").fadeIn(n.fadeInImageduration,function(){})}function c(e,i){n.currentImage=e,o("#Choco_loading").fadeIn(n.fadeInImageduration);var t=new Image;t.onload=function(){o("#Choco_bigImage").attr("src",images[n.setIndex][n.currentImage].adress);var e=m(t.height,t.width);s(e.hauteur,e.largeur,i),o("#Choco_loading").stop().fadeOut(n.fadeOutImageduration)},t.src=images[n.setIndex][n.currentImage].adress,h(),l()}function d(e){return!(!n.linkImages||0==n.currentImage&&e==-1||n.currentImage==n.lastImage&&1==e)&&(o("#Choco_container_description").css("visibility","hidden"),void o("#Choco_bigImage").fadeTo(n.fadeOutImageduration,0,function(){c(n.currentImage+parseInt(e),!1)}))}function s(e,i,t){t&&(o("#Choco_container_photo, #Choco_content, #Choco_bigImage").stop(!0,!1).css({overflow:"visible"}),o("#Choco_bigImage").animate({height:e+"px",width:i+"px"},n.fadeInImageduration)),o("#Choco_container_photo").animate({height:e,width:i},n.fadeInImageduration),o("#Choco_content").animate({height:e,width:i,marginLeft:-i/2,marginTop:-e/2},n.fadeInImageduration,"swing",function(){o("#Choco_bigImage").fadeTo(n.fadeInImageduration,1).height(e).width(i),t||(g(),o("#Choco_container_description").css("visibility","visible"),o("#Choco_close").fadeIn(n.fadeInImageduration))}).css("overflow","visible")}function g(){if(n.linkImages)for(var e=["Choco_right_arrow","Choco_left_arrow"],i=0;i<e.length;i++)hide=!1,"Choco_right_arrow"==e[i]&&n.currentImage==n.lastImage?(hide=!0,o("#"+e[i]).fadeOut(300)):"Choco_left_arrow"==e[i]&&0==n.currentImage&&(hide=!0,o("#"+e[i]).fadeOut(300)),hide||o("#"+e[i]).fadeIn(n.fadeOutImageduration)}function h(){n.currentImage!==n.lastImage&&(_=new Image,z=n.currentImage+1,_.src=images[n.setIndex][z].adress)}function l(){var e=n.currentImage+1,i=n.lastImage+1;o("#Choco_container_title").html(images[n.setIndex][n.currentImage].caption),o("#Choco_container_via").html(n.setTitle+n.separator1+e+n.separator2+i)}function u(e,o){return void 0===e?o:e}function m(e,i){var t=i+28*i/100,a=o("#Choco_container_description").height()+o("#Choco_close").height(),r=e+a,c=i/e,d=e/i;for("body"==n.container.get(0).nodeName.toLowerCase()?(windowHeight=o(window).height(),windowWidth=o(window).width()):(windowHeight=n.container.height(),windowWidth=n.container.width()),notFitting=!0;notFitting;){var t=i+28*i/100,r=e+a;t>windowWidth?(i=100*windowWidth/128,e=d*i):r>windowHeight?(e=windowHeight-a,i=c*e):notFitting=!1}return{largeur:i,hauteur:e}}function I(){o("#Choco_overlay").remove(),o("#Choco_content").remove()}function f(){o("#Choco_overlay").fadeOut(900,function(){o("#Choco_overlay").remove()}),o("#Choco_content").fadeOut(500,function(){o("#Choco_content").remove()}),n.currentImage=0}n=o.extend({container:o("body"),displayAsALink:!1,linkImages:!0,linksContainer:"Choco_links_container",overlayOpacity:.9,overlayColor:"#fff",fadeInOverlayduration:500,fadeInImageduration:500,fadeOutImageduration:500,vache:!0,separator1:" | ",separator2:"/",leftImg:"images/left.gif",rightImg:"images/right.gif",closeImg:"images/close.gif",loadingImg:"images/loading.gif",currentImage:0,setIndex:0,setTitle:"",lastImage:0},n),i++,n.setIndex=i,images[n.setIndex]=[],this.each(function(e){0==e&&n.linkImages&&""==n.setTitle&&(n.setTitle=u(o(this).attr("rel")," ")),o(this).each(function(){images[n.setIndex].displayAsALink=n.displayAsALink,images[n.setIndex][e]=[],images[n.setIndex][e].adress=u(o(this).attr("href")," "),images[n.setIndex][e].caption=u(o(this).attr("title")," "),n.displayAsALink||o(this).unbind("click").bind("click",{id:n.setIndex,nom:n.setTitle,i:e},t)})});for(var _=0;_<images[n.setIndex].length;_++)if(images[n.setIndex].displayAsALink)return 0==o("#"+n.linksContainer).size()&&this.filter(":first").before('<ul id="'+n.linksContainer+'"></ul>'),o("#"+n.linksContainer).append('<li><a href="#" id="Choco_numsetIndex_'+n.setIndex+'" class="Choco_link">'+n.setTitle+"</a></li>"),e=this.parent(),o(this).remove(),""==o.trim(e.html())&&e.remove(),o("#Choco_numsetIndex_"+n.setIndex).unbind("click").bind("click",{id:n.setIndex,nom:n.setTitle,i:n.currentImage},t)}}(jQuery);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpxdWVyeS5jaG9jb2xhdC5qcyJdLCJuYW1lcyI6WyIkIiwiaW1hZ2VzIiwiY2FsbHMiLCJmbiIsIkNob2NvbGF0Iiwic2V0dGluZ3MiLCJfaW5pdGlhbGlzZSIsImV2ZW50IiwiY3VycmVudEltYWdlIiwiZGF0YSIsImkiLCJzZXRJbmRleCIsImlkIiwic2V0VGl0bGUiLCJub20iLCJsYXN0SW1hZ2UiLCJsZW5ndGgiLCJzaG93Q2hvY29sYXQiLCJfaW50ZXJmYWNlIiwiY2xlYXIiLCJjb250YWluZXIiLCJhcHBlbmQiLCJjc3MiLCJsZWZ0SW1nIiwicmlnaHRJbWciLCJjbG9zZUltZyIsImxvYWRpbmdJbWciLCJnZXQiLCJub2RlTmFtZSIsInRvTG93ZXJDYXNlIiwicG9zaXRpb24iLCJvdmVyZmxvdyIsImxpbmUtaGVpZ2h0IiwiZG9jdW1lbnQiLCJ1bmJpbmQiLCJiaW5kIiwiZSIsImtleUNvZGUiLCJjaGFuZ2VQYWdlQ2hvY29sYXQiLCJjbG9zZSIsInZhY2hlIiwiY2xpY2siLCJ3aW5kb3ciLCJyZXNpemUiLCJsb2FkIiwiYmFja2dyb3VuZC1jb2xvciIsIm92ZXJsYXlDb2xvciIsIm9wYWNpdHkiLCJvdmVybGF5T3BhY2l0eSIsImZhZGVJbiIsImZhZGVJbk92ZXJsYXlkdXJhdGlvbiIsImZhZGVJbkltYWdlZHVyYXRpb24iLCJpbWFnZSIsImltZ1ByZWxvYWRlciIsIkltYWdlIiwib25sb2FkIiwiYXR0ciIsImFqdXN0ZWVzIiwiaVdhbnRUaGVQZXJmZWN0SW1hZ2VTaXplIiwiaGVpZ2h0Iiwid2lkdGgiLCJDaG9Db2xhdCIsInN0b3AiLCJmYWRlT3V0IiwiZmFkZU91dEltYWdlZHVyYXRpb24iLCJzcmMiLCJwcmVsb2FkIiwidXBhZHRlRGVzY3JpcHRpb24iLCJzaWduZSIsImxpbmtJbWFnZXMiLCJmYWRlVG8iLCJwYXJzZUludCIsImhhdXRldXJfaW1hZ2UiLCJsYXJnZXVyX2ltYWdlIiwiYW5pbWF0ZSIsIm1hcmdpbkxlZnQiLCJtYXJnaW5Ub3AiLCJhcnJvd3NNYW5hZ2luZyIsIndoYXQiLCJoaWRlIiwieiIsImN1cnJlbnQiLCJsYXN0IiwiaHRtbCIsInNlcGFyYXRvcjEiLCJzZXBhcmF0b3IyIiwiaXNTZXQiLCJ2YXJpYWJsZSIsImRlZmF1bHRWYWx1ZSIsInVuZGVmaW5lZCIsImhpbWciLCJsaW1nIiwibGJsb2NrIiwiaGVpZ2h0RGVzY0FuZENsb3NlIiwiaGJsb2NrIiwiayIsImtrIiwid2luZG93SGVpZ2h0Iiwid2luZG93V2lkdGgiLCJub3RGaXR0aW5nIiwibGFyZ2V1ciIsImhhdXRldXIiLCJyZW1vdmUiLCJleHRlbmQiLCJkaXNwbGF5QXNBTGluayIsImxpbmtzQ29udGFpbmVyIiwidGhpcyIsImVhY2giLCJpbmRleCIsInNpemUiLCJmaWx0ZXIiLCJiZWZvcmUiLCJwYXJlbnQiLCJ0cmltIiwialF1ZXJ5Il0sIm1hcHBpbmdzIjoiQ0FTQSxTQUFVQSxHQUNUQyxTQUNBLElBQUlDLEdBQVEsQ0FDWkYsR0FBRUcsR0FBR0MsU0FBVyxTQUFTQyxHQWlFeEIsUUFBU0MsR0FBWUMsR0FPcEIsTUFMQUYsR0FBU0csYUFBZUQsRUFBTUUsS0FBS0MsRUFDbkNMLEVBQVNNLFNBQWVKLEVBQU1FLEtBQUtHLEdBQ25DUCxFQUFTUSxTQUFlTixFQUFNRSxLQUFLSyxJQUNuQ1QsRUFBU1UsVUFBZWQsT0FBT0ksRUFBU00sVUFBVUssT0FBUyxFQUMzREMsS0FDTyxFQUVSLFFBQVNDLEtBRVJDLElBQ0FkLEVBQVNlLFVBQVVDLE9BQU8seWFBQzFCckIsRUFBRSxxQkFBcUJzQixJQUFJLG1CQUFvQixPQUFPakIsRUFBU2tCLFFBQVEsS0FDdkV2QixFQUFFLHNCQUFzQnNCLElBQUksbUJBQW9CLE9BQU9qQixFQUFTbUIsU0FBUyxLQUN6RXhCLEVBQUUsZ0JBQWdCc0IsSUFBSSxtQkFBb0IsT0FBT2pCLEVBQVNvQixTQUFTLEtBQ25FekIsRUFBRSxrQkFBa0JzQixJQUFJLG1CQUFvQixPQUFPakIsRUFBU3FCLFdBQVcsS0FDZixTQUFyRHJCLEVBQVNl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RUFBRSxzQkFBc0JLLEVBQVNNLFVBQVV1QixPQUFPLFNBQVNDLEtBQUssU0FBVXZCLEdBQUlQLEVBQVNNLFNBQVVHLElBQU1ULEVBQVNRLFNBQVVILEVBQUlMLEVBQVNHLGNBQWVGLEtBNE45SjRHIiwiZmlsZSI6ImpxdWVyeS5jaG9jb2xhdC5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qXG4gSW5zcGlyZWQgYnkgdGhlIGxpZ2h0Ym94IHBsdWdpbiBhZGFwdGVkIHRvIGpxdWVyeSBieSBMZWFuZHJvIFZpZWlyYSBQaW5obyAoaHR0cDovL2xlYW5kcm92aWVpcmEuY29tKVxuIFxuIEBhdXRob3IgIDogTmljb2xhcyBUdXJsYWlzIDogbmljb2xhcy1hdC1pbnNpcGkuZGVcbiBAdmVyc2lvbiA6IFYwLjMuMSAtIEp1bmUgMjAxMlxuIEBsaWNlbnNlIDogTGljZW5zZWQgdW5kZXIgQ0NBdHRyaWJ1dGlvbi1TaGFyZUFsaWtlXG4gQHdlYnNpdGUgOiBodHRwOi8vY2hvY29sYXQuaW5zaXBpLmRlXG4gXG4qL1xuKGZ1bmN0aW9uKCQpIHtcblx0aW1hZ2VzID0gW107XG5cdHZhciBjYWxscyA9IDA7XG5cdCQuZm4uQ2hvY29sYXQgPSBmdW5jdGlvbihzZXR0aW5ncykge1xuXHRcdHNldHRpbmdzID0gJC5leHRlbmQoe1xuXHRcdFx0Y29udGFpbmVyICAgICAgICAgICAgIDogJCgnYm9keScpLFxuXHRcdFx0ZGlzcGxheUFzQUxpbmsgICAgICAgIDogZmFsc2UsXG5cdFx0XHRsaW5rSW1hZ2VzICAgICAgICAgICAgOiB0cnVlLFxuXHRcdFx0bGlua3NDb250YWluZXIgICAgICAgIDogJ0Nob2NvX2xpbmtzX2NvbnRhaW5lcicsXHRcdFx0XHRcblx0XHRcdG92ZXJsYXlPcGFjaXR5ICAgICAgICA6IDAuOSxcblx0XHRcdG92ZXJsYXlDb2xvciAgICAgICAgICA6ICcjZmZmJyxcblx0XHRcdGZhZGVJbk92ZXJsYXlkdXJhdGlvbiA6IDUwMCxcblx0XHRcdGZhZGVJbkltYWdlZHVyYXRpb24gICA6IDUwMCxcblx0XHRcdGZhZGVPdXRJbWFnZWR1cmF0aW9uICA6IDUwMCxcblx0XHRcdHZhY2hlICAgICAgICAgICAgICAgICA6IHRydWUsXHRcdFx0XHRcdFxuXHRcdFx0c2VwYXJhdG9yMSAgICAgICAgICAgIDogJyB8ICcsXHRcdFx0XHRcdFx0XG5cdFx0XHRzZXBhcmF0b3IyICAgICAgICAgICAgOiAnLycsXHRcdFx0XHRcdFx0XG5cdFx0XHRsZWZ0SW1nICAgICAgICAgICAgICAgOiAnaW1hZ2VzL2xlZnQuZ2lmJyxcdFxuXHRcdFx0cmlnaHRJbWcgICAgICAgICAgICAgIDogJ2ltYWdlcy9yaWdodC5naWYnLFx0XG5cdFx0XHRjbG9zZUltZyAgICAgICAgICAgICAgOiAnaW1hZ2VzL2Nsb3NlLmdpZicsXHRcdFxuXHRcdFx0bG9hZGluZ0ltZyAgICAgICAgICAgIDogJ2ltYWdlcy9sb2FkaW5nLmdpZicsXHRcdFxuXHRcdFx0Y3VycmVudEltYWdlICAgICAgICAgIDogMCxcdFx0XHRcdFx0XHRcblx0XHRcdHNldEluZGV4ICAgICAgICAgICAgICA6IDAsXG5cdFx0XHRzZXRUaXRsZSAgICAgICAgICAgICAgOiAnJyxcblx0XHRcdGxhc3RJbWFnZSAgICAgICAgICAgICA6IDBcblx0XHR9LHNldHRpbmdzKTtcblx0XHRcblx0XHRjYWxscysrO1xuXHRcdHNldHRpbmdzLnNldEluZGV4ID0gY2FsbHM7XG5cdFx0aW1hZ2VzW3NldHRpbmdzLnNldEluZGV4XSA9IFtdO1xuXHRcdFxuXHRcdC8vaW1hZ2VzOlxuXHRcdHRoaXMuZWFjaChmdW5jdGlvbihpbmRleCl7XG5cdFx0XHRpZihpbmRleCA9PSAwICYmIHNldHRpbmdzLmxpbmtJbWFnZXMgJiYgc2V0dGluZ3Muc2V0VGl0bGUgPT0gJycpe1xuXHRcdFx0XHRzZXR0aW5ncy5zZXRUaXRsZSA9IGlzU2V0KCQodGhpcykuYXR0cigncmVsJyksICcgJyk7XG5cdFx0XHR9XG5cdFx0XHQkKHRoaXMpLmVhY2goZnVuY3Rpb24oKSB7XG5cdFx0XHRcdGltYWdlc1tzZXR0aW5ncy5zZXRJbmRleF1bJ2Rpc3BsYXlBc0FMaW5rJ10gPSBzZXR0aW5ncy5kaXNwbGF5QXNBTGluaztcblx0XHRcdFx0aW1hZ2VzW3NldHRpbmdzLnNldEluZGV4XVtpbmRleF0gICAgICAgICAgICA9IFtdO1xuXHRcdFx0XHRpbWFnZXNbc2V0dGluZ3Muc2V0SW5kZXhdW2luZGV4XVsnYWRyZXNzJ10gID0gaXNTZXQoJCh0aGlzKS5hdHRyKCdocmVmJyksICcgJyk7XG5cdFx0XHRcdGltYWdlc1tzZXR0aW5ncy5zZXRJbmRleF1baW5kZXhdWydjYXB0aW9uJ10gPSBpc1NldCgkKHRoaXMpLmF0dHIoJ3RpdGxlJyksICcgJyk7XG5cdFx0XHRcdGlmKCFzZXR0aW5ncy5kaXNwbGF5QXNBTGluayl7XG5cdFx0XHRcdFx0JCh0aGlzKS51bmJpbmQoJ2NsaWNrJykuYmluZCgnY2xpY2snLCB7XG5cdFx0XHRcdFx0XHRpZCAgOiBzZXR0aW5ncy5zZXRJbmRleCxcblx0XHRcdFx0XHRcdG5vbSA6IHNldHRpbmdzLnNldFRpdGxlLFxuXHRcdFx0XHRcdFx0aSAgIDogaW5kZXhcblx0XHRcdFx0XHR9LCBfaW5pdGlhbGlzZSk7XG5cdFx0XHRcdH1cblx0XHRcdH0pXG5cdFx0fSk7XG5cdFx0XG5cdFx0Ly9zZXRJbmRleDpcblx0XHRmb3IodmFyIGkgPSAwOyBpIDwgaW1hZ2VzW3NldHRpbmdzLnNldEluZGV4XS5sZW5ndGg7IGkrKylcblx0XHR7XG5cdFx0XHRpZihpbWFnZXNbc2V0dGluZ3Muc2V0SW5kZXhdWydkaXNwbGF5QXNBTGluayddKXtcblx0XHRcdFx0aWYoJCgnIycrc2V0dGluZ3MubGlua3NDb250YWluZXIpLnNpemUoKSA9PSAwKXtcblx0XHRcdFx0XHR0aGlzLmZpbHRlcihcIjpmaXJzdFwiKS5iZWZvcmUoJzx1bCBpZD1cIicrc2V0dGluZ3MubGlua3NDb250YWluZXIrJ1wiPjwvdWw+Jyk7XG5cdFx0XHRcdH1cblx0XHRcdFx0JCgnIycrc2V0dGluZ3MubGlua3NDb250YWluZXIpLmFwcGVuZCgnPGxpPjxhIGhyZWY9XCIjXCIgaWQ9XCJDaG9jb19udW1zZXRJbmRleF8nK3NldHRpbmdzLnNldEluZGV4KydcIiBjbGFzcz1cIkNob2NvX2xpbmtcIj4nK3NldHRpbmdzLnNldFRpdGxlKyc8L2E+PC9saT4nKTtcblx0XHRcdFx0ZSA9IHRoaXMucGFyZW50KCk7XG5cdFx0XHRcdCQodGhpcykucmVtb3ZlKCk7XG5cdFx0XHRcdGlmKCQudHJpbShlLmh0bWwoKSkgPT0gXCJcIil7Ly9JZiBwYXJlbnQgZW1wdHkgOiByZW1vdmUgaXRcblx0XHRcdFx0XHRlLnJlbW92ZSgpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHJldHVybiAkKCcjQ2hvY29fbnVtc2V0SW5kZXhfJytzZXR0aW5ncy5zZXRJbmRleCkudW5iaW5kKCdjbGljaycpLmJpbmQoJ2NsaWNrJywge2lkOiBzZXR0aW5ncy5zZXRJbmRleCwgbm9tIDogc2V0dGluZ3Muc2V0VGl0bGUsIGkgOiBzZXR0aW5ncy5jdXJyZW50SW1hZ2V9LCBfaW5pdGlhbGlzZSk7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdFxuXHRcdGZ1bmN0aW9uIF9pbml0aWFsaXNlKGV2ZW50KSB7XG5cdFx0XHRcblx0XHRcdHNldHRpbmdzLmN1cnJlbnRJbWFnZSA9IGV2ZW50LmRhdGEuaTtcblx0XHRcdHNldHRpbmdzLnNldEluZGV4ICAgICA9IGV2ZW50LmRhdGEuaWQ7XG5cdFx0XHRzZXR0aW5ncy5zZXRUaXRsZSAgICAgPSBldmVudC5kYXRhLm5vbTtcblx0XHRcdHNldHRpbmdzLmxhc3RJbWFnZSAgICA9IGltYWdlc1tzZXR0aW5ncy5zZXRJbmRleF0ubGVuZ3RoIC0gMTtcblx0XHRcdHNob3dDaG9jb2xhdCgpO1xuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH1cblx0XHRmdW5jdGlvbiBfaW50ZXJmYWNlKCl7XG5cdFx0XHQvL2h0bWxcblx0XHRcdGNsZWFyKCk7XG5cdFx0XHRzZXR0aW5ncy5jb250YWluZXIuYXBwZW5kKCc8ZGl2IGlkPVwiQ2hvY29fb3ZlcmxheVwiPjwvZGl2PjxkaXYgaWQ9XCJDaG9jb19jb250ZW50XCI+PGRpdiBpZD1cIkNob2NvX2Nsb3NlXCI+PC9kaXY+PGRpdiBpZD1cIkNob2NvX2xvYWRpbmdcIj48L2Rpdj48ZGl2IGlkPVwiQ2hvY29fY29udGFpbmVyX3Bob3RvXCI+PGltZyBpZD1cIkNob2NvX2JpZ0ltYWdlXCIgc3JjPVwiXCIgLz48L2Rpdj48ZGl2IGlkPVwiQ2hvY29fY29udGFpbmVyX2Rlc2NyaXB0aW9uXCI+PHNwYW4gaWQ9XCJDaG9jb19jb250YWluZXJfdGl0bGVcIj48L3NwYW4+PHNwYW4gaWQ9XCJDaG9jb19jb250YWluZXJfdmlhXCI+PC9zcGFuPjwvZGl2PjxkaXYgaWQ9XCJDaG9jb19sZWZ0X2Fycm93XCIgY2xhc3M9XCJDaG9jb19hcnJvd3NcIj48L2Rpdj48ZGl2IGlkPVwiQ2hvY29fcmlnaHRfYXJyb3dcIiBjbGFzcz1cIkNob2NvX2Fycm93c1wiPjwvZGl2PjwvZGl2PicpO1x0XG5cdFx0XHQkKCcjQ2hvY29fbGVmdF9hcnJvdycpLmNzcygnYmFja2dyb3VuZC1pbWFnZScsICd1cmwoJytzZXR0aW5ncy5sZWZ0SW1nKycpJyk7ICBcblx0XHRcdCQoJyNDaG9jb19yaWdodF9hcnJvdycpLmNzcygnYmFja2dyb3VuZC1pbWFnZScsICd1cmwoJytzZXR0aW5ncy5yaWdodEltZysnKScpOyAgXG5cdFx0XHQkKCcjQ2hvY29fY2xvc2UnKS5jc3MoJ2JhY2tncm91bmQtaW1hZ2UnLCAndXJsKCcrc2V0dGluZ3MuY2xvc2VJbWcrJyknKTsgXG5cdFx0XHQkKCcjQ2hvY29fbG9hZGluZycpLmNzcygnYmFja2dyb3VuZC1pbWFnZScsICd1cmwoJytzZXR0aW5ncy5sb2FkaW5nSW1nKycpJyk7IFxuXHRcdFx0aWYoc2V0dGluZ3MuY29udGFpbmVyLmdldCgwKS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpICE9PSAnYm9keScpe1xuXHRcdFx0XHRzZXR0aW5ncy5jb250YWluZXIuY3NzKHsncG9zaXRpb24nOidyZWxhdGl2ZScsJ292ZXJmbG93JzonaGlkZGVuJywnbGluZS1oZWlnaHQnOidub3JtYWwnfSk7Ly95ZXMsIHllc1xuXHRcdFx0XHQkKCcjQ2hvY29fY29udGVudCcpLmNzcygncG9zaXRpb24nLCdyZWxhdGl2ZScpO1xuXHRcdFx0XHQkKCcjQ2hvY29fb3ZlcmxheScpLmNzcygncG9zaXRpb24nLCAnYWJzb2x1dGUnKTtcblx0XHRcdH1cblx0XHRcdC8vZXZlbnRzXG5cdFx0XHQkKGRvY3VtZW50KS51bmJpbmQoJ2tleWRvd24nKS5iaW5kKCdrZXlkb3duJywgZnVuY3Rpb24oZSl7XG5cdFx0XHRcdHN3aXRjaChlLmtleUNvZGUpe1xuXHRcdFx0XHRcdGNhc2UgMzc6XG5cdFx0XHRcdFx0XHRjaGFuZ2VQYWdlQ2hvY29sYXQoLTEpO1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0Y2FzZSAzOTpcblx0XHRcdFx0XHRcdGNoYW5nZVBhZ2VDaG9jb2xhdCgxKTtcblx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdGNhc2UgMjc6XG5cdFx0XHRcdFx0XHRjbG9zZSgpO1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdH07XG5cdFx0XHR9KTtcblx0XHRcdGlmKHNldHRpbmdzLnZhY2hlKXtcblx0XHRcdFx0JCgnI0Nob2NvX292ZXJsYXknKS5jbGljayhmdW5jdGlvbigpe1xuXHRcdFx0XHRcdGNsb3NlKCk7XG5cdFx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0XHR9KTtcblx0XHRcdH1cblx0XHRcdCQoJyNDaG9jb19sZWZ0X2Fycm93JykudW5iaW5kKCkuYmluZCgnY2xpY2snLCBmdW5jdGlvbigpe1xuXHRcdFx0XHRjaGFuZ2VQYWdlQ2hvY29sYXQoLTEpO1xuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHR9KTtcblx0XHRcdCQoJyNDaG9jb19yaWdodF9hcnJvdycpLnVuYmluZCgpLmJpbmQoJ2NsaWNrJywgZnVuY3Rpb24oKXtcblx0XHRcdFx0Y2hhbmdlUGFnZUNob2NvbGF0KDEpO1xuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHR9KTtcblx0XHRcdCQoJyNDaG9jb19jbG9zZScpLnVuYmluZCgpLmJpbmQoJ2NsaWNrJywgZnVuY3Rpb24oKXtcblx0XHRcdFx0Y2xvc2UoKTtcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0fSk7XG5cdFx0XHQkKHdpbmRvdykucmVzaXplKGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRsb2FkKHNldHRpbmdzLmN1cnJlbnRJbWFnZSx0cnVlKTtcblx0XHRcdH0pO1xuXHRcblx0XHR9XG5cdFx0ZnVuY3Rpb24gc2hvd0Nob2NvbGF0KCl7XHRcblx0XHRcdF9pbnRlcmZhY2UoKTtcblx0XHRcdGxvYWQoc2V0dGluZ3MuY3VycmVudEltYWdlLCBmYWxzZSk7XG5cdFx0XHQkKCcjQ2hvY29fb3ZlcmxheScpXG5cdFx0XHRcdC5jc3Moe1xuXHRcdFx0XHRcdCdiYWNrZ3JvdW5kLWNvbG9yJyA6IHNldHRpbmdzLm92ZXJsYXlDb2xvcixcblx0XHRcdFx0XHQnb3BhY2l0eScgICAgICAgICAgOiBzZXR0aW5ncy5vdmVybGF5T3BhY2l0eVxuXHRcdFx0XHR9KVxuXHRcdFx0XHQuZmFkZUluKHNldHRpbmdzLmZhZGVJbk92ZXJsYXlkdXJhdGlvbik7XG5cdFx0XHQkKCcjQ2hvY29fY29udGVudCcpLmZhZGVJbihzZXR0aW5ncy5mYWRlSW5JbWFnZWR1cmF0aW9uLGZ1bmN0aW9uKCl7fSk7XG5cdFx0XHRcblx0XHR9XG5cdFx0ZnVuY3Rpb24gbG9hZChpbWFnZSxyZXNpemUpe1xuXHRcdFx0c2V0dGluZ3MuY3VycmVudEltYWdlID0gaW1hZ2U7XG5cdFx0XHQkKCcjQ2hvY29fbG9hZGluZycpLmZhZGVJbihzZXR0aW5ncy5mYWRlSW5JbWFnZWR1cmF0aW9uKTtcblx0XHRcdHZhciBpbWdQcmVsb2FkZXIgPSBuZXcgSW1hZ2UoKTtcblx0XHRcdGltZ1ByZWxvYWRlci5vbmxvYWQgPSBmdW5jdGlvbigpe1xuXHRcdFx0XHQkKCcjQ2hvY29fYmlnSW1hZ2UnKS5hdHRyKCdzcmMnLGltYWdlc1tzZXR0aW5ncy5zZXRJbmRleF1bc2V0dGluZ3MuY3VycmVudEltYWdlXVsnYWRyZXNzJ10pO1xuXHRcdFx0XHR2YXIgYWp1c3RlZXMgPSBpV2FudFRoZVBlcmZlY3RJbWFnZVNpemUoaW1nUHJlbG9hZGVyLmhlaWdodCxpbWdQcmVsb2FkZXIud2lkdGgpO1xuXHRcdFx0XHRDaG9Db2xhdChhanVzdGVlc1snaGF1dGV1ciddLGFqdXN0ZWVzWydsYXJnZXVyJ10scmVzaXplKTtcblx0XHRcdFx0JCgnI0Nob2NvX2xvYWRpbmcnKS5zdG9wKCkuZmFkZU91dChzZXR0aW5ncy5mYWRlT3V0SW1hZ2VkdXJhdGlvbik7XG5cdFx0XHR9O1xuXHRcdFx0aW1nUHJlbG9hZGVyLnNyYyA9IGltYWdlc1tzZXR0aW5ncy5zZXRJbmRleF1bc2V0dGluZ3MuY3VycmVudEltYWdlXVsnYWRyZXNzJ107XG5cdFx0XHRwcmVsb2FkKCk7XG5cdFx0XHR1cGFkdGVEZXNjcmlwdGlvbigpO1xuXHRcdH1cblx0XHRmdW5jdGlvbiBjaGFuZ2VQYWdlQ2hvY29sYXQoc2lnbmUpe1xuXHRcdFx0aWYoIXNldHRpbmdzLmxpbmtJbWFnZXMgfHwgKHNldHRpbmdzLmN1cnJlbnRJbWFnZSA9PSAwICYmIHNpZ25lID09IC0xKSB8fCAoc2V0dGluZ3MuY3VycmVudEltYWdlID09IHNldHRpbmdzLmxhc3RJbWFnZSAmJiBzaWduZSA9PSAxKSlcblx0XHRcdHtcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0fVxuXHRcdFx0ZWxzZXtcblx0XHRcdFx0Ly8kKCcjQ2hvY29fY29udGFpbmVyX2Rlc2NyaXB0aW9uJykuZmFkZVRvKHNldHRpbmdzLmZhZGVPdXRJbWFnZWR1cmF0aW9uLDApOyBtYWtpbmcgYSB3ZWlyZCBidWcgd2l0aCBmaXJlZm94IDE3XG5cdFx0XHRcdCQoJyNDaG9jb19jb250YWluZXJfZGVzY3JpcHRpb24nKS5jc3MoJ3Zpc2liaWxpdHknLCdoaWRkZW4nKTtcblx0XHRcdFx0JCgnI0Nob2NvX2JpZ0ltYWdlJykuZmFkZVRvKHNldHRpbmdzLmZhZGVPdXRJbWFnZWR1cmF0aW9uLCAwLCBmdW5jdGlvbigpe1xuXHRcdFx0XHRcdGxvYWQoc2V0dGluZ3MuY3VycmVudEltYWdlICsgcGFyc2VJbnQoc2lnbmUpLCBmYWxzZSk7XG5cdFx0XHRcdH0pO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRmdW5jdGlvbiBDaG9Db2xhdChoYXV0ZXVyX2ltYWdlLGxhcmdldXJfaW1hZ2UscmVzaXplKXtcblxuXHRcdFx0aWYocmVzaXplKXtcblx0XHRcdFx0JCgnI0Nob2NvX2NvbnRhaW5lcl9waG90bywgI0Nob2NvX2NvbnRlbnQsICNDaG9jb19iaWdJbWFnZScpLnN0b3AodHJ1ZSxmYWxzZSkuY3NzKHsnb3ZlcmZsb3cnOid2aXNpYmxlJ30pO1xuXHRcdFx0XHQkKCcjQ2hvY29fYmlnSW1hZ2UnKS5hbmltYXRlKHtcblx0XHRcdFx0XHQnaGVpZ2h0JyA6IGhhdXRldXJfaW1hZ2UrJ3B4Jyxcblx0XHRcdFx0XHQnd2lkdGgnICA6IGxhcmdldXJfaW1hZ2UrJ3B4J1xuXHRcdFx0XHR9LHNldHRpbmdzLmZhZGVJbkltYWdlZHVyYXRpb24pO1xuXHRcdFx0fVxuXHRcdFx0JCgnI0Nob2NvX2NvbnRhaW5lcl9waG90bycpLmFuaW1hdGUoe1xuXHRcdFx0XHRcdCdoZWlnaHQnIDogaGF1dGV1cl9pbWFnZSxcblx0XHRcdFx0XHQnd2lkdGgnICA6IGxhcmdldXJfaW1hZ2Vcblx0XHRcdH0sc2V0dGluZ3MuZmFkZUluSW1hZ2VkdXJhdGlvbik7XG5cdFx0XHQkKCcjQ2hvY29fY29udGVudCcpLmFuaW1hdGUoe1xuXHRcdFx0XHQnaGVpZ2h0JyAgICAgOiBoYXV0ZXVyX2ltYWdlLFxuXHRcdFx0XHQnd2lkdGgnICAgICAgOiBsYXJnZXVyX2ltYWdlLFxuXHRcdFx0XHQnbWFyZ2luTGVmdCcgOiAtbGFyZ2V1cl9pbWFnZS8yLFxuXHRcdFx0XHQnbWFyZ2luVG9wJyAgOiAtKGhhdXRldXJfaW1hZ2UpLzJcblx0XHRcdH0sc2V0dGluZ3MuZmFkZUluSW1hZ2VkdXJhdGlvbiwgJ3N3aW5nJywgZnVuY3Rpb24oKXtcblx0XHRcdFx0JCgnI0Nob2NvX2JpZ0ltYWdlJykuZmFkZVRvKHNldHRpbmdzLmZhZGVJbkltYWdlZHVyYXRpb24sIDEpLmhlaWdodChoYXV0ZXVyX2ltYWdlKS53aWR0aChsYXJnZXVyX2ltYWdlKTtcblx0XHRcdFx0aWYoIXJlc2l6ZSlcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGFycm93c01hbmFnaW5nKCk7XG5cdFx0XHRcdFx0Ly8kKCcjQ2hvY29fY29udGFpbmVyX2Rlc2NyaXB0aW9uJykuZmFkZVRvKHNldHRpbmdzLmZhZGVJbkltYWdlZHVyYXRpb24sMSk7IG1ha2luZyBhIHdlaXJkIGJ1ZyB3aXRoIGZpcmVmb3ggMTdcblx0XHRcdFx0XHQkKCcjQ2hvY29fY29udGFpbmVyX2Rlc2NyaXB0aW9uJykuY3NzKCd2aXNpYmlsaXR5JywndmlzaWJsZScpO1xuXHRcdFx0XHRcdCQoJyNDaG9jb19jbG9zZScpLmZhZGVJbihzZXR0aW5ncy5mYWRlSW5JbWFnZWR1cmF0aW9uKTtcblx0XHRcdFx0fVxuXHRcdFx0fSkuXG5cdFx0XHRjc3MoJ292ZXJmbG93JywgJ3Zpc2libGUnKTtcblx0XHR9XG5cdFx0ZnVuY3Rpb24gYXJyb3dzTWFuYWdpbmcoKXtcblx0XHRcdGlmKHNldHRpbmdzLmxpbmtJbWFnZXMpe1xuXHRcdFx0XHR2YXIgd2hhdCA9IFsnQ2hvY29fcmlnaHRfYXJyb3cnLCdDaG9jb19sZWZ0X2Fycm93J107XG5cdFx0XHRcdGZvcih2YXIgaT0wOyBpIDwgd2hhdC5sZW5ndGg7IGkrKyl7XG5cdFx0XHRcdFx0aGlkZSA9IGZhbHNlO1xuXHRcdFx0XHRcdGlmKHdoYXRbaV0gPT0gJ0Nob2NvX3JpZ2h0X2Fycm93JyAmJiBzZXR0aW5ncy5jdXJyZW50SW1hZ2UgPT0gc2V0dGluZ3MubGFzdEltYWdlKXtcblx0XHRcdFx0XHRcdGhpZGUgPSB0cnVlO1xuXHRcdFx0XHRcdFx0JCgnIycrd2hhdFtpXSkuZmFkZU91dCgzMDApO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRlbHNlIGlmKHdoYXRbaV0gPT0gJ0Nob2NvX2xlZnRfYXJyb3cnICYmIHNldHRpbmdzLmN1cnJlbnRJbWFnZSA9PSAwKXtcblx0XHRcdFx0XHRcdGhpZGUgPSB0cnVlO1xuXHRcdFx0XHRcdFx0JCgnIycrd2hhdFtpXSkuZmFkZU91dCgzMDApO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRpZighaGlkZSl7XG5cdFx0XHRcdFx0XHQkKCcjJyt3aGF0W2ldKS5mYWRlSW4oc2V0dGluZ3MuZmFkZU91dEltYWdlZHVyYXRpb24pO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0XHRmdW5jdGlvbiBwcmVsb2FkKCl7XG5cdFx0XHRpZihzZXR0aW5ncy5jdXJyZW50SW1hZ2UgIT09IHNldHRpbmdzLmxhc3RJbWFnZSl7XG5cdFx0XHRcdGkgPSBuZXcgSW1hZ2U7XG5cdFx0XHRcdHogPSBzZXR0aW5ncy5jdXJyZW50SW1hZ2UgKyAxO1xuXHRcdFx0XHRpLnNyYyA9IGltYWdlc1tzZXR0aW5ncy5zZXRJbmRleF1bel1bJ2FkcmVzcyddO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRmdW5jdGlvbiB1cGFkdGVEZXNjcmlwdGlvbigpe1xuXHRcdFx0dmFyIGN1cnJlbnQgPSBzZXR0aW5ncy5jdXJyZW50SW1hZ2UgKyAxO1xuXHRcdFx0dmFyIGxhc3QgPSBzZXR0aW5ncy5sYXN0SW1hZ2UgKyAxO1xuXHRcdFx0JCgnI0Nob2NvX2NvbnRhaW5lcl90aXRsZScpLmh0bWwoaW1hZ2VzW3NldHRpbmdzLnNldEluZGV4XVtzZXR0aW5ncy5jdXJyZW50SW1hZ2VdWydjYXB0aW9uJ10pO1xuXHRcdFx0JCgnI0Nob2NvX2NvbnRhaW5lcl92aWEnKS5odG1sKHNldHRpbmdzLnNldFRpdGxlK3NldHRpbmdzLnNlcGFyYXRvcjErY3VycmVudCArc2V0dGluZ3Muc2VwYXJhdG9yMitsYXN0KTtcblx0XHR9XG5cdFx0ZnVuY3Rpb24gaXNTZXQodmFyaWFibGUsZGVmYXVsdFZhbHVlKXtcblx0XHRcdC8vIHJldHVybiB2YXJpYWJsZSA9PT0gdW5kZWZpbmVkID8gZGVmYXVsdFZhbHVlIDogdmFyaWFibGU7ID9cblx0XHRcdGlmICh2YXJpYWJsZSA9PT0gdW5kZWZpbmVkKSB7XG5cdFx0XHRcdHJldHVybiBkZWZhdWx0VmFsdWU7XG5cdFx0XHR9XG5cdFx0XHRlbHNle1xuXHRcdFx0XHRyZXR1cm4gdmFyaWFibGU7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdGZ1bmN0aW9uIGlXYW50VGhlUGVyZmVjdEltYWdlU2l6ZShoaW1nLGxpbWcpe1xuXHRcdFx0Ly8yOCUgPSAxNCUgKyAxNCUgbWFyZ2luXG5cdFx0XHR2YXIgbGJsb2NrICAgICAgICAgICAgID0gbGltZyArIChsaW1nKjI4LzEwMCk7XG5cdFx0XHR2YXIgaGVpZ2h0RGVzY0FuZENsb3NlID0gJCgnI0Nob2NvX2NvbnRhaW5lcl9kZXNjcmlwdGlvbicpLmhlaWdodCgpKyQoJyNDaG9jb19jbG9zZScpLmhlaWdodCgpO1xuXHRcdFx0dmFyIGhibG9jayAgICAgICAgICAgICA9IGhpbWcgKyBoZWlnaHREZXNjQW5kQ2xvc2U7XG5cdFx0XHR2YXIgayAgICAgICAgICAgICAgICAgID0gbGltZy9oaW1nO1xuXHRcdFx0dmFyIGtrICAgICAgICAgICAgICAgICA9IGhpbWcvbGltZztcblx0XHRcdGlmKHNldHRpbmdzLmNvbnRhaW5lci5nZXQoMCkubm9kZU5hbWUudG9Mb3dlckNhc2UoKSA9PSAnYm9keScpe1xuXHRcdFx0XHR3aW5kb3dIZWlnaHQgPSAkKHdpbmRvdykuaGVpZ2h0KCk7XG5cdFx0XHRcdHdpbmRvd1dpZHRoICA9ICQod2luZG93KS53aWR0aCgpO1xuXHRcdFx0fVxuXHRcdFx0ZWxzZXtcblx0XHRcdFx0d2luZG93SGVpZ2h0ID0gc2V0dGluZ3MuY29udGFpbmVyLmhlaWdodCgpO1xuXHRcdFx0XHR3aW5kb3dXaWR0aCAgPSBzZXR0aW5ncy5jb250YWluZXIud2lkdGgoKTtcblx0XHRcdH1cblx0XHRcdG5vdEZpdHRpbmcgPSB0cnVlO1xuXHRcdFx0XHR3aGlsZSAobm90Rml0dGluZyl7XG5cdFx0XHRcdHZhciBsYmxvY2sgPSBsaW1nICsgKGxpbWcqMjgvMTAwKTtcblx0XHRcdFx0dmFyIGhibG9jayA9IGhpbWcgKyBoZWlnaHREZXNjQW5kQ2xvc2U7XG5cdFx0XHRcdFx0aWYobGJsb2NrID4gd2luZG93V2lkdGgpe1xuXHRcdFx0XHRcdFx0bGltZyA9IHdpbmRvd1dpZHRoKjEwMC8xMjg7XG5cdFx0XHRcdFx0XHRcblx0XHRcdFx0XHRcdGhpbWcgPSBrayAqIGxpbWc7XG5cdFx0XHRcdFx0fWVsc2UgaWYoaGJsb2NrID4gd2luZG93SGVpZ2h0KXtcblx0XHRcdFx0XHRcdGhpbWcgPSAod2luZG93SGVpZ2h0IC0gaGVpZ2h0RGVzY0FuZENsb3NlKTtcblx0XHRcdFx0XHRcdGxpbWcgPSBrICogaGltZztcblx0XHRcdFx0XHR9ZWxzZXtcblx0XHRcdFx0XHRcdG5vdEZpdHRpbmcgPSBmYWxzZTtcblx0XHRcdFx0XHR9O1xuXHRcdFx0XHR9O1xuXHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0bGFyZ2V1cjpsaW1nLFxuXHRcdFx0XHRoYXV0ZXVyOmhpbWdcblx0XHRcdH07XG5cblx0XHR9XG5cdFx0ZnVuY3Rpb24gY2xlYXIoKXtcblx0XHRcdCQoJyNDaG9jb19vdmVybGF5JykucmVtb3ZlKCk7XG5cdFx0XHQkKCcjQ2hvY29fY29udGVudCcpLnJlbW92ZSgpO1xuXHRcdH1cblx0XHRmdW5jdGlvbiBjbG9zZSgpe1xuXHRcdFx0JCgnI0Nob2NvX292ZXJsYXknKS5mYWRlT3V0KDkwMCwgZnVuY3Rpb24oKXskKCcjQ2hvY29fb3ZlcmxheScpLnJlbW92ZSgpfSk7XG5cdFx0XHQkKCcjQ2hvY29fY29udGVudCcpLmZhZGVPdXQoNTAwLCBmdW5jdGlvbigpeyQoJyNDaG9jb19jb250ZW50JykucmVtb3ZlKCl9KTtcblx0XHRcdHNldHRpbmdzLmN1cnJlbnRJbWFnZSA9IDA7XG5cdFx0fVxuXHRcbn07XG59KShqUXVlcnkpO1xuIl19
