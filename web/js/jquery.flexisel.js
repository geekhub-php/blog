!function(e){e.fn.flexisel=function(n){var t,i,l,a,o=e.extend({visibleItems:4,itemsToScroll:3,animationSpeed:400,infinite:!0,navigationTargetSelector:null,autoPlay:{enable:!1,interval:5e3,pauseOnHover:!0},responsiveBreakpoints:{portrait:{changePoint:480,visibleItems:1,itemsToScroll:1},landscape:{changePoint:640,visibleItems:2,itemsToScroll:2},tablet:{changePoint:768,visibleItems:3,itemsToScroll:3}}},n),s=e(this),r=e.extend(o,n),c=!0,f=r.visibleItems,d=r.itemsToScroll,u=[],v={init:function(){return this.each(function(){v.appendHTML(),v.setEventHandlers(),v.initializeItems()})},initializeItems:function(){var n=r.responsiveBreakpoints;for(var l in n)u.push(n[l]);u.sort(function(e,n){return e.changePoint-n.changePoint});var a=s.children();t=v.getCurrentItemWidth(),i=a.length,a.width(t),s.css({left:-t*(f+1)}),s.fadeIn(),e(window).trigger("resize")},appendHTML:function(){if(s.addClass("nbs-flexisel-ul"),s.wrap("<div class='nbs-flexisel-container'><div class='nbs-flexisel-inner'></div></div>"),s.find("li").addClass("nbs-flexisel-item"),r.navigationTargetSelector&&e(r.navigationTargetSelector).length>0?e("<div class='nbs-flexisel-nav-left'></div><div class='nbs-flexisel-nav-right'></div>").appendTo(r.navigationTargetSelector):(r.navigationTargetSelector=s.parent(),e("<div class='nbs-flexisel-nav-left'></div><div class='nbs-flexisel-nav-right'></div>").insertAfter(s)),r.infinite){var n=s.children(),t=n.clone(),i=n.clone();s.prepend(t),s.append(i)}},setEventHandlers:function(){var n=s.children();e(window).on("resize",function(i){clearTimeout(l),l=setTimeout(function(){v.calculateDisplay(),t=v.getCurrentItemWidth(),n.width(t),r.infinite?s.css({left:-t*Math.floor(n.length/2)}):(v.clearDisabled(),e(r.navigationTargetSelector).find(".nbs-flexisel-nav-left").addClass("disabled"),s.css({left:0}))},100)}),e(r.navigationTargetSelector).find(".nbs-flexisel-nav-left").on("click",function(e){v.scroll(!0)}),e(r.navigationTargetSelector).find(".nbs-flexisel-nav-right").on("click",function(e){v.scroll(!1)}),r.autoPlay.enable&&(v.setAutoplayInterval(),r.autoPlay.pauseOnHover===!0&&s.on({mouseenter:function(){c=!1},mouseleave:function(){c=!0}})),s[0].addEventListener("touchstart",v.touchHandler.handleTouchStart,!1),s[0].addEventListener("touchmove",v.touchHandler.handleTouchMove,!1)},calculateDisplay:function(){var n=e("html").width(),t=u[u.length-1].changePoint;for(var i in u){if(n>=t){f=r.visibleItems,d=r.itemsToScroll;break}if(n<u[i].changePoint){f=u[i].visibleItems,d=u[i].itemsToScroll;break}}},scroll:function(e){if("undefined"==typeof e&&(e=!0),1==c){if(c=!1,t=v.getCurrentItemWidth(),r.autoPlay.enable&&clearInterval(a),r.infinite)s.animate({left:e?"+="+t*d:"-="+t*d},r.animationSpeed,function(){c=!0,e?v.offsetItemsToBeginning(d):v.offsetItemsToEnd(d),v.offsetSliderPosition(e)});else{var n=t*d;e?s.animate({left:v.calculateNonInfiniteLeftScroll(n)},r.animationSpeed,function(){c=!0}):s.animate({left:v.calculateNonInfiniteRightScroll(n)},r.animationSpeed,function(){c=!0})}r.autoPlay.enable&&v.setAutoplayInterval()}},touchHandler:{xDown:null,yDown:null,handleTouchStart:function(e){this.xDown=e.touches[0].clientX,this.yDown=e.touches[0].clientY},handleTouchMove:function(e){if(this.xDown&&this.yDown){var n=e.touches[0].clientX,t=e.touches[0].clientY,i=this.xDown-n;this.yDown-t;Math.abs(i)>0&&(i>0?v.scroll(!1):v.scroll(!0)),this.xDown=null,this.yDown=null,c=!0}}},getCurrentItemWidth:function(){return s.parent().width()/f},offsetItemsToBeginning:function(e){"undefined"==typeof e&&(e=1);for(var n=0;n<e;n++)s.children().last().insertBefore(s.children().first())},offsetItemsToEnd:function(e){"undefined"==typeof e&&(e=1);for(var n=0;n<e;n++)s.children().first().insertAfter(s.children().last())},offsetSliderPosition:function(e){var n=parseInt(s.css("left").replace("px",""));e?n-=t*d:n+=t*d,s.css({left:n})},getOffsetPosition:function(){return parseInt(s.css("left").replace("px",""))},calculateNonInfiniteLeftScroll:function(n){return v.clearDisabled(),v.getOffsetPosition()+n>=0?(e(r.navigationTargetSelector).find(".nbs-flexisel-nav-left").addClass("disabled"),0):v.getOffsetPosition()+n},calculateNonInfiniteRightScroll:function(n){v.clearDisabled();var l=i*t-f*t;return v.getOffsetPosition()-n<=-l?(e(r.navigationTargetSelector).find(".nbs-flexisel-nav-right").addClass("disabled"),-l):v.getOffsetPosition()-n},setAutoplayInterval:function(){a=setInterval(function(){c&&v.scroll(!1)},r.autoPlay.interval)},clearDisabled:function(){var n=e(r.navigationTargetSelector);n.find(".nbs-flexisel-nav-left").removeClass("disabled"),n.find(".nbs-flexisel-nav-right").removeClass("disabled")}};return v[n]?v[n].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof n&&n?void e.error('Method "'+method+'" does not exist in flexisel plugin!'):v.init.apply(this)}}(jQuery);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpxdWVyeS5mbGV4aXNlbC5qcyJdLCJuYW1lcyI6WyIkIiwiZm4iLCJmbGV4aXNlbCIsIm9wdGlvbnMiLCJpdGVtc1dpZHRoIiwiaXRlbUNvdW50IiwicmVzaXplVGltZW91dCIsImF1dG9QbGF5SW50ZXJ2YWwiLCJkZWZhdWx0cyIsImV4dGVuZCIsInZpc2libGVJdGVtcyIsIml0ZW1zVG9TY3JvbGwiLCJhbmltYXRpb25TcGVlZCIsImluZmluaXRlIiwibmF2aWdhdGlvblRhcmdldFNlbGVjdG9yIiwiYXV0b1BsYXkiLCJlbmFibGUiLCJpbnRlcnZhbCIsInBhdXNlT25Ib3ZlciIsInJlc3BvbnNpdmVCcmVha3BvaW50cyIsInBvcnRyYWl0IiwiY2hhbmdlUG9pbnQiLCJsYW5kc2NhcGUiLCJ0YWJsZXQiLCJvYmplY3QiLCJ0aGlzIiwic2V0dGluZ3MiLCJjYW5OYXZpZ2F0ZSIsIml0ZW1zVmlzaWJsZSIsInJlc3BvbnNpdmVQb2ludHMiLCJtZXRob2RzIiwiaW5pdCIsImVhY2giLCJhcHBlbmRIVE1MIiwic2V0RXZlbnRIYW5kbGVycyIsImluaXRpYWxpemVJdGVtcyIsIm9iaiIsImkiLCJwdXNoIiwic29ydCIsImEiLCJiIiwiY2hpbGRTZXQiLCJjaGlsZHJlbiIsImdldEN1cnJlbnRJdGVtV2lkdGgiLCJsZW5ndGgiLCJ3aWR0aCIsImNzcyIsImxlZnQiLCJmYWRlSW4iLCJ3aW5kb3ciLCJ0cmlnZ2VyIiwiYWRkQ2xhc3MiLCJ3cmFwIiwiZmluZCIsImFwcGVuZFRvIiwicGFyZW50IiwiaW5zZXJ0QWZ0ZXIiLCJjbG9uZUNvbnRlbnRCZWZvcmUiLCJjbG9uZSIsImNsb25lQ29udGVudEFmdGVyIiwicHJlcGVuZCIsImFwcGVuZCIsIm9uIiwiZXZlbnQiLCJjbGVhclRpbWVvdXQiLCJzZXRUaW1lb3V0IiwiY2FsY3VsYXRlRGlzcGxheSIsIk1hdGgiLCJmbG9vciIsImNsZWFyRGlzYWJsZWQiLCJzY3JvbGwiLCJzZXRBdXRvcGxheUludGVydmFsIiwibW91c2VlbnRlciIsIm1vdXNlbGVhdmUiLCJhZGRFdmVudExpc3RlbmVyIiwidG91Y2hIYW5kbGVyIiwiaGFuZGxlVG91Y2hTdGFydCIsImhhbmRsZVRvdWNoTW92ZSIsImNvbnRlbnRXaWR0aCIsImxhcmdlc3RDdXN0b20iLCJyZXZlcnNlIiwiY2xlYXJJbnRlcnZhbCIsImFuaW1hdGUiLCJvZmZzZXRJdGVtc1RvQmVnaW5uaW5nIiwib2Zmc2V0SXRlbXNUb0VuZCIsIm9mZnNldFNsaWRlclBvc2l0aW9uIiwic2Nyb2xsRGlzdGFuY2UiLCJjYWxjdWxhdGVOb25JbmZpbml0ZUxlZnRTY3JvbGwiLCJjYWxjdWxhdGVOb25JbmZpbml0ZVJpZ2h0U2Nyb2xsIiwieERvd24iLCJ5RG93biIsImV2dCIsInRvdWNoZXMiLCJjbGllbnRYIiwiY2xpZW50WSIsInhVcCIsInlVcCIsInhEaWZmIiwiYWJzIiwibnVtYmVyIiwibGFzdCIsImluc2VydEJlZm9yZSIsImZpcnN0IiwicGFyc2VJbnQiLCJyZXBsYWNlIiwiZ2V0T2Zmc2V0UG9zaXRpb24iLCJ0b1Njcm9sbCIsIm5lZ2F0aXZlT2Zmc2V0TGltaXQiLCJzZXRJbnRlcnZhbCIsInJlbW92ZUNsYXNzIiwiYXBwbHkiLCJBcnJheSIsInByb3RvdHlwZSIsInNsaWNlIiwiY2FsbCIsImFyZ3VtZW50cyIsImVycm9yIiwibWV0aG9kIiwialF1ZXJ5Il0sIm1hcHBpbmdzIjoiQ0FXQSxTQUFXQSxHQUVWQSxFQUFFQyxHQUFHQyxTQUFXLFNBQVVDLEdBRXpCLEdBb0NJQyxHQUVBQyxFQUlBQyxFQUNBQyxFQTNDQUMsRUFBV1IsRUFBRVMsUUFDaEJDLGFBQWMsRUFDZEMsY0FBZSxFQUNmQyxlQUFnQixJQUNoQkMsVUFBVSxFQUNWQyx5QkFBMEIsS0FDMUJDLFVBQ0NDLFFBQVEsRUFDUkMsU0FBVSxJQUNWQyxjQUFjLEdBRWZDLHVCQUNDQyxVQUNDQyxZQUFZLElBQ1pYLGFBQWMsRUFDZEMsY0FBZSxHQUVoQlcsV0FDQ0QsWUFBWSxJQUNaWCxhQUFjLEVBQ2RDLGNB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RXpDN0UsRUFBUXdDLGVBQ1IsSUFBSXNDLEdBQXVCdkcsRUFBWUQsRUFBZXdCLEVBQWV4QixDQUVyRSxPQUFHMEIsR0FBUTRFLG9CQUFzQkMsSUFBYUMsR0FDN0M1RyxFQUFFMEIsRUFBU1osMEJBQTBCd0MsS0FBSywyQkFBMkJGLFNBQVMsYUFDdEV3RCxHQUVEOUUsRUFBUTRFLG9CQUFzQkMsR0FJdkNuQyxvQkFBcUIsV0FDcEJqRSxFQUFtQnNHLFlBQVksV0FDMUJsRixHQUNIRyxFQUFReUMsUUFBTyxJQUVkN0MsRUFBU1gsU0FBU0UsV0FHdEJxRCxjQUFlLFdBQ2QsR0FBSWQsR0FBU3hELEVBQUUwQixFQUFTWix5QkFDeEIwQyxHQUFPRixLQUFLLDBCQUEwQndELFlBQVksWUFDbER0RCxFQUFPRixLQUFLLDJCQUEyQndELFlBQVksYUFLckQsT0FBSWhGLEdBQVEzQixHQUNKMkIsRUFBUTNCLEdBQVM0RyxNQUFNdEYsS0FBTXVGLE1BQU1DLFVBQVVDLE1BQU1DLEtBQUtDLFVBQVcsSUFDN0MsZ0JBQVpqSCxJQUF5QkEsTUFHMUNILEdBQUVxSCxNQUFPLFdBQWNDLE9BQVMsd0NBRnpCeEYsRUFBUUMsS0FBS2dGLE1BQU10RixRQU0xQjhGIiwiZmlsZSI6ImpxdWVyeS5mbGV4aXNlbC5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qXG4gKiBGaWxlOiBqcXVlcnkuZmxleGlzZWwuanNcbiAqIFZlcnNpb246IDIuMS4wXG4gKiBEZXNjcmlwdGlvbjogUmVzcG9uc2l2ZSBjYXJvdXNlbCBqUXVlcnkgcGx1Z2luXG4gKiBBdXRob3I6IDliaXQgU3R1ZGlvc1xuICogQ29weXJpZ2h0IDIwMTYsIDliaXQgU3R1ZGlvc1xuICogaHR0cDovL3d3dy45Yml0c3R1ZGlvcy5jb21cbiAqIEZyZWUgdG8gdXNlIGFuZCBhYnVzZSB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG4gKiBodHRwOi8vd3d3Lm9wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL21pdC1saWNlbnNlLnBocFxuICovXG5cbihmdW5jdGlvbiAoJCkge1xuXG5cdCQuZm4uZmxleGlzZWwgPSBmdW5jdGlvbiAob3B0aW9ucykge1xuXG5cdFx0dmFyIGRlZmF1bHRzID0gJC5leHRlbmQoe1xuXHRcdFx0dmlzaWJsZUl0ZW1zOiA0LFxuXHRcdFx0aXRlbXNUb1Njcm9sbDogMyxcblx0XHRcdGFuaW1hdGlvblNwZWVkOiA0MDAsXG5cdFx0XHRpbmZpbml0ZTogdHJ1ZSxcblx0XHRcdG5hdmlnYXRpb25UYXJnZXRTZWxlY3RvcjogbnVsbCxcblx0XHRcdGF1dG9QbGF5OiB7XG5cdFx0XHRcdGVuYWJsZTogZmFsc2UsXG5cdFx0XHRcdGludGVydmFsOiA1MDAwLFxuXHRcdFx0XHRwYXVzZU9uSG92ZXI6IHRydWVcblx0XHRcdH0sXG5cdFx0XHRyZXNwb25zaXZlQnJlYWtwb2ludHM6IHtcblx0XHRcdFx0cG9ydHJhaXQ6IHtcblx0XHRcdFx0XHRjaGFuZ2VQb2ludDo0ODAsXG5cdFx0XHRcdFx0dmlzaWJsZUl0ZW1zOiAxLFxuXHRcdFx0XHRcdGl0ZW1zVG9TY3JvbGw6IDFcblx0XHRcdFx0fSxcblx0XHRcdFx0bGFuZHNjYXBlOiB7XG5cdFx0XHRcdFx0Y2hhbmdlUG9pbnQ6NjQwLFxuXHRcdFx0XHRcdHZpc2libGVJdGVtczogMixcblx0XHRcdFx0XHRpdGVtc1RvU2Nyb2xsOiAyXG5cdFx0XHRcdH0sXG5cdFx0XHRcdHRhYmxldDoge1xuXHRcdFx0XHRcdGNoYW5nZVBvaW50Ojc2OCxcblx0XHRcdFx0XHR2aXNpYmxlSXRlbXM6IDMsXG5cdFx0XHRcdFx0aXRlbXNUb1Njcm9sbDogM1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fSwgb3B0aW9ucyk7XG5cblx0XHQvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXG5cdFx0IFByaXZhdGUgVmFyaWFibGVzXG5cdFx0ICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG5cblx0XHR2YXIgb2JqZWN0ID0gJCh0aGlzKTtcblx0XHR2YXIgc2V0dGluZ3MgPSAkLmV4dGVuZChkZWZhdWx0cywgb3B0aW9ucyk7XG5cdFx0dmFyIGl0ZW1zV2lkdGg7XG5cdFx0dmFyIGNhbk5hdmlnYXRlID0gdHJ1ZTtcblx0XHR2YXIgaXRlbUNvdW50O1xuXHRcdHZhciBpdGVtc1Zpc2libGUgPSBzZXR0aW5ncy52aXNpYmxlSXRlbXM7XG5cdFx0dmFyIGl0ZW1zVG9TY3JvbGwgPSBzZXR0aW5ncy5pdGVtc1RvU2Nyb2xsO1xuXHRcdHZhciByZXNwb25zaXZlUG9pbnRzID0gW107XG5cdFx0dmFyIHJlc2l6ZVRpbWVvdXQ7XG5cdFx0dmFyIGF1dG9QbGF5SW50ZXJ2YWw7XG5cblx0XHQvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXG5cdFx0IFB1YmxpYyBNZXRob2RzXG5cdFx0ICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG5cblx0XHR2YXIgbWV0aG9kcyA9IHtcblxuXHRcdFx0aW5pdDogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRcdG1ldGhvZHMuYXBwZW5kSFRNTCgpO1xuXHRcdFx0XHRcdG1ldGhvZHMuc2V0RXZlbnRIYW5kbGVycygpO1xuXHRcdFx0XHRcdG1ldGhvZHMuaW5pdGlhbGl6ZUl0ZW1zKCk7XG5cdFx0XHRcdH0pO1xuXHRcdFx0fSxcblxuXHRcdFx0LyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxuXHRcdFx0IEluaXRpYWxpemUgSXRlbXNcblx0XHRcdCAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuXG5cdFx0XHRpbml0aWFsaXplSXRlbXM6IGZ1bmN0aW9uKCkge1xuXG5cdFx0XHRcdHZhciBvYmogPSBzZXR0aW5ncy5yZXNwb25zaXZlQnJlYWtwb2ludHM7XG5cdFx0XHRcdGZvcih2YXIgaSBpbiBvYmopIHsgcmVzcG9uc2l2ZVBvaW50cy5wdXNoKG9ialtpXSk7IH1cblx0XHRcdFx0cmVzcG9uc2l2ZVBvaW50cy5zb3J0KGZ1bmN0aW9uKGEsIGIpIHsgcmV0dXJuIGEuY2hhbmdlUG9pbnQgLSBiLmNoYW5nZVBvaW50OyB9KTtcblx0XHRcdFx0dmFyIGNoaWxkU2V0ID0gb2JqZWN0LmNoaWxkcmVuKCk7XG5cdFx0XHRcdGl0ZW1zV2lkdGggPSBtZXRob2RzLmdldEN1cnJlbnRJdGVtV2lkdGgoKTtcblx0XHRcdFx0aXRlbUNvdW50ID0gY2hpbGRTZXQubGVuZ3RoO1xuXHRcdFx0XHRjaGlsZFNldC53aWR0aChpdGVtc1dpZHRoKTtcblx0XHRcdFx0b2JqZWN0LmNzcyh7ICdsZWZ0JzogLWl0ZW1zV2lkdGggKiAoaXRlbXNWaXNpYmxlICsgMSkgfSk7XG5cdFx0XHRcdG9iamVjdC5mYWRlSW4oKTtcblx0XHRcdFx0JCh3aW5kb3cpLnRyaWdnZXIoJ3Jlc2l6ZScpO1xuXG5cdFx0XHR9LFxuXG5cdFx0XHQvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXG5cdFx0XHQgQXBwZW5kIEhUTUxcblx0XHRcdCAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuXG5cdFx0XHRhcHBlbmRIVE1MOiBmdW5jdGlvbigpIHtcblxuXHRcdFx0XHRvYmplY3QuYWRkQ2xhc3MoXCJuYnMtZmxleGlzZWwtdWxcIik7XG5cdFx0XHRcdG9iamVjdC53cmFwKFwiPGRpdiBjbGFzcz0nbmJzLWZsZXhpc2VsLWNvbnRhaW5lcic+PGRpdiBjbGFzcz0nbmJzLWZsZXhpc2VsLWlubmVyJz48L2Rpdj48L2Rpdj5cIik7XG5cdFx0XHRcdG9iamVjdC5maW5kKFwibGlcIikuYWRkQ2xhc3MoXCJuYnMtZmxleGlzZWwtaXRlbVwiKTtcblxuXHRcdFx0XHRpZihzZXR0aW5ncy5uYXZpZ2F0aW9uVGFyZ2V0U2VsZWN0b3IgJiYgJChzZXR0aW5ncy5uYXZpZ2F0aW9uVGFyZ2V0U2VsZWN0b3IpLmxlbmd0aCA+IDApIHtcblx0XHRcdFx0XHQkKFwiPGRpdiBjbGFzcz0nbmJzLWZsZXhpc2VsLW5hdi1sZWZ0Jz48L2Rpdj48ZGl2IGNsYXNzPSduYnMtZmxleGlzZWwtbmF2LXJpZ2h0Jz48L2Rpdj5cIikuYXBwZW5kVG8oc2V0dGluZ3MubmF2aWdhdGlvblRhcmdldFNlbGVjdG9yKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRzZXR0aW5ncy5uYXZpZ2F0aW9uVGFyZ2V0U2VsZWN0b3IgPSBvYmplY3QucGFyZW50KCk7XG5cdFx0XHRcdFx0JChcIjxkaXYgY2xhc3M9J25icy1mbGV4aXNlbC1uYXYtbGVmdCc+PC9kaXY+PGRpdiBjbGFzcz0nbmJzLWZsZXhpc2VsLW5hdi1yaWdodCc+PC9kaXY+XCIpLmluc2VydEFmdGVyKG9iamVjdCk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRpZihzZXR0aW5ncy5pbmZpbml0ZSkge1xuXHRcdFx0XHRcdHZhciBjaGlsZFNldCA9IG9iamVjdC5jaGlsZHJlbigpO1xuXHRcdFx0XHRcdHZhciBjbG9uZUNvbnRlbnRCZWZvcmUgPSBjaGlsZFNldC5jbG9uZSgpO1xuXHRcdFx0XHRcdHZhciBjbG9uZUNvbnRlbnRBZnRlciA9IGNoaWxkU2V0LmNsb25lKCk7XG5cdFx0XHRcdFx0b2JqZWN0LnByZXBlbmQoY2xvbmVDb250ZW50QmVmb3JlKTtcblx0XHRcdFx0XHRvYmplY3QuYXBwZW5kKGNsb25lQ29udGVudEFmdGVyKTtcblx0XHRcdFx0fVxuXG5cdFx0XHR9LFxuXG5cblx0XHRcdC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcblx0XHRcdCBTZXQgRXZlbnQgSGFuZGxlcnNcblx0XHRcdCAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuXHRcdFx0c2V0RXZlbnRIYW5kbGVyczogZnVuY3Rpb24oKSB7XG5cblx0XHRcdFx0dmFyIGNoaWxkU2V0ID0gb2JqZWN0LmNoaWxkcmVuKCk7XG5cblx0XHRcdFx0JCh3aW5kb3cpLm9uKFwicmVzaXplXCIsIGZ1bmN0aW9uKGV2ZW50KXtcblx0XHRcdFx0XHRjbGVhclRpbWVvdXQocmVzaXplVGltZW91dCk7XG5cdFx0XHRcdFx0cmVzaXplVGltZW91dCA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcblx0XHRcdFx0XHRcdG1ldGhvZHMuY2FsY3VsYXRlRGlzcGxheSgpO1xuXHRcdFx0XHRcdFx0aXRlbXNXaWR0aCA9IG1ldGhvZHMuZ2V0Q3VycmVudEl0ZW1XaWR0aCgpO1xuXHRcdFx0XHRcdFx0Y2hpbGRTZXQud2lkdGgoaXRlbXNXaWR0aCk7XG5cblx0XHRcdFx0XHRcdGlmKHNldHRpbmdzLmluZmluaXRlKSB7XG5cdFx0XHRcdFx0XHRcdG9iamVjdC5jc3Moe1xuXHRcdFx0XHRcdFx0XHRcdCdsZWZ0JzogLWl0ZW1zV2lkdGggKiBNYXRoLmZsb29yKGNoaWxkU2V0Lmxlbmd0aCAvIDIpXG5cdFx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0bWV0aG9kcy5jbGVhckRpc2FibGVkKCk7XG5cdFx0XHRcdFx0XHRcdCQoc2V0dGluZ3MubmF2aWdhdGlvblRhcmdldFNlbGVjdG9yKS5maW5kKFwiLm5icy1mbGV4aXNlbC1uYXYtbGVmdFwiKS5hZGRDbGFzcygnZGlzYWJsZWQnKTtcblx0XHRcdFx0XHRcdFx0b2JqZWN0LmNzcyh7XG5cdFx0XHRcdFx0XHRcdFx0J2xlZnQnOiAwXG5cdFx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0sIDEwMCk7XG5cblx0XHRcdFx0fSk7XG5cblx0XHRcdFx0JChzZXR0aW5ncy5uYXZpZ2F0aW9uVGFyZ2V0U2VsZWN0b3IpLmZpbmQoXCIubmJzLWZsZXhpc2VsLW5hdi1sZWZ0XCIpLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24gKGV2ZW50KSB7XG5cdFx0XHRcdFx0bWV0aG9kcy5zY3JvbGwodHJ1ZSk7XG5cdFx0XHRcdH0pO1xuXG5cdFx0XHRcdCQoc2V0dGluZ3MubmF2aWdhdGlvblRhcmdldFNlbGVjdG9yKS5maW5kKFwiLm5icy1mbGV4aXNlbC1uYXYtcmlnaHRcIikub24oXCJjbGlja1wiLCBmdW5jdGlvbiAoZXZlbnQpIHtcblx0XHRcdFx0XHRtZXRob2RzLnNjcm9sbChmYWxzZSk7XG5cdFx0XHRcdH0pO1xuXG5cdFx0XHRcdGlmKHNldHRpbmdzLmF1dG9QbGF5LmVuYWJsZSkge1xuXG5cdFx0XHRcdFx0bWV0aG9kcy5zZXRBdXRvcGxheUludGVydmFsKCk7XG5cblx0XHRcdFx0XHRpZiAoc2V0dGluZ3MuYXV0b1BsYXkucGF1c2VPbkhvdmVyID09PSB0cnVlKSB7XG5cdFx0XHRcdFx0XHRvYmplY3Qub24oe1xuXHRcdFx0XHRcdFx0XHRtb3VzZWVudGVyIDogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0XHRcdFx0Y2FuTmF2aWdhdGUgPSBmYWxzZTtcblx0XHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdFx0bW91c2VsZWF2ZSA6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdFx0XHRcdGNhbk5hdmlnYXRlID0gdHJ1ZTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdH1cblxuXHRcdFx0XHRvYmplY3RbMF0uYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hzdGFydCcsIG1ldGhvZHMudG91Y2hIYW5kbGVyLmhhbmRsZVRvdWNoU3RhcnQsIGZhbHNlKTtcblx0XHRcdFx0b2JqZWN0WzBdLmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNobW92ZScsIG1ldGhvZHMudG91Y2hIYW5kbGVyLmhhbmRsZVRvdWNoTW92ZSwgZmFsc2UpO1xuXG5cdFx0XHR9LFxuXG5cdFx0XHQvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXG5cdFx0XHQgQ2FsY3VsYXRlIERpc3BsYXlcblx0XHRcdCAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuXG5cdFx0XHRjYWxjdWxhdGVEaXNwbGF5OiBmdW5jdGlvbigpIHtcblx0XHRcdFx0dmFyIGNvbnRlbnRXaWR0aCA9ICQoJ2h0bWwnKS53aWR0aCgpO1xuXHRcdFx0XHR2YXIgbGFyZ2VzdEN1c3RvbSA9IHJlc3BvbnNpdmVQb2ludHNbcmVzcG9uc2l2ZVBvaW50cy5sZW5ndGgtMV0uY2hhbmdlUG9pbnQ7IC8vIHNvcnRlZCBhcnJheVxuXG5cdFx0XHRcdGZvcih2YXIgaSBpbiByZXNwb25zaXZlUG9pbnRzKSB7XG5cblx0XHRcdFx0XHRpZihjb250ZW50V2lkdGggPj0gbGFyZ2VzdEN1c3RvbSkgeyAvLyBzZXQgdG8gZGVmYXVsdCBpZiB3aWR0aCBncmVhdGVyIHRoYW4gbGFyZ2VzdCBjdXN0b20gcmVzcG9uc2l2ZUJyZWFrcG9pbnRcblx0XHRcdFx0XHRcdGl0ZW1zVmlzaWJsZSA9IHNldHRpbmdzLnZpc2libGVJdGVtcztcblx0XHRcdFx0XHRcdGl0ZW1zVG9TY3JvbGwgPSBzZXR0aW5ncy5pdGVtc1RvU2Nyb2xsO1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGVsc2UgeyAvLyBkZXRlcm1pbmUgY3VzdG9tIHJlc3BvbnNpdmVCcmVha3BvaW50IHRvIHVzZVxuXG5cdFx0XHRcdFx0XHRpZihjb250ZW50V2lkdGggPCByZXNwb25zaXZlUG9pbnRzW2ldLmNoYW5nZVBvaW50KSB7XG5cdFx0XHRcdFx0XHRcdGl0ZW1zVmlzaWJsZSA9IHJlc3BvbnNpdmVQb2ludHNbaV0udmlzaWJsZUl0ZW1zO1xuXHRcdFx0XHRcdFx0XHRpdGVtc1RvU2Nyb2xsID0gcmVzcG9uc2l2ZVBvaW50c1tpXS5pdGVtc1RvU2Nyb2xsO1xuXHRcdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRjb250aW51ZTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblxuXHRcdFx0fSxcblxuXHRcdFx0LyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxuXHRcdFx0IFNjcm9sbFxuXHRcdFx0ICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG5cblx0XHRcdHNjcm9sbDogZnVuY3Rpb24ocmV2ZXJzZSkge1xuXG5cdFx0XHRcdGlmKHR5cGVvZiByZXZlcnNlID09PSAndW5kZWZpbmVkJykgeyByZXZlcnNlID0gdHJ1ZSB9XG5cblx0XHRcdFx0aWYoY2FuTmF2aWdhdGUgPT0gdHJ1ZSkge1xuXHRcdFx0XHRcdGNhbk5hdmlnYXRlID0gZmFsc2U7XG5cdFx0XHRcdFx0aXRlbXNXaWR0aCA9IG1ldGhvZHMuZ2V0Q3VycmVudEl0ZW1XaWR0aCgpO1xuXG5cdFx0XHRcdFx0aWYoc2V0dGluZ3MuYXV0b1BsYXkuZW5hYmxlKSB7XG5cdFx0XHRcdFx0XHRjbGVhckludGVydmFsKGF1dG9QbGF5SW50ZXJ2YWwpO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdGlmKCFzZXR0aW5ncy5pbmZpbml0ZSkge1xuXG5cdFx0XHRcdFx0XHR2YXIgc2Nyb2xsRGlzdGFuY2UgPSBpdGVtc1dpZHRoICogaXRlbXNUb1Njcm9sbDtcblxuXHRcdFx0XHRcdFx0aWYocmV2ZXJzZSkge1xuXHRcdFx0XHRcdFx0XHRvYmplY3QuYW5pbWF0ZSh7XG5cdFx0XHRcdFx0XHRcdFx0J2xlZnQnOiBtZXRob2RzLmNhbGN1bGF0ZU5vbkluZmluaXRlTGVmdFNjcm9sbChzY3JvbGxEaXN0YW5jZSlcblx0XHRcdFx0XHRcdFx0fSwgc2V0dGluZ3MuYW5pbWF0aW9uU3BlZWQsIGZ1bmN0aW9uKCl7XG5cdFx0XHRcdFx0XHRcdFx0Y2FuTmF2aWdhdGUgPSB0cnVlO1xuXHRcdFx0XHRcdFx0XHR9KTtcblxuXHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0b2JqZWN0LmFuaW1hdGUoe1xuXHRcdFx0XHRcdFx0XHRcdCdsZWZ0JzogbWV0aG9kcy5jYWxjdWxhdGVOb25JbmZpbml0ZVJpZ2h0U2Nyb2xsKHNjcm9sbERpc3RhbmNlKVxuXHRcdFx0XHRcdFx0XHR9LHNldHRpbmdzLmFuaW1hdGlvblNwZWVkLCBmdW5jdGlvbigpe1xuXHRcdFx0XHRcdFx0XHRcdGNhbk5hdmlnYXRlID0gdHJ1ZTtcblx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHR9XG5cblxuXG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdG9iamVjdC5hbmltYXRlKHtcblx0XHRcdFx0XHRcdFx0J2xlZnQnIDogcmV2ZXJzZSA/IFwiKz1cIiArIGl0ZW1zV2lkdGggKiBpdGVtc1RvU2Nyb2xsIDogXCItPVwiICsgaXRlbXNXaWR0aCAqIGl0ZW1zVG9TY3JvbGxcblx0XHRcdFx0XHRcdH0sIHNldHRpbmdzLmFuaW1hdGlvblNwZWVkLCBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRcdFx0Y2FuTmF2aWdhdGUgPSB0cnVlO1xuXG5cdFx0XHRcdFx0XHRcdGlmKHJldmVyc2UpIHtcblx0XHRcdFx0XHRcdFx0XHRtZXRob2RzLm9mZnNldEl0ZW1zVG9CZWdpbm5pbmcoaXRlbXNUb1Njcm9sbCk7XG5cdFx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdFx0bWV0aG9kcy5vZmZzZXRJdGVtc1RvRW5kKGl0ZW1zVG9TY3JvbGwpO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdG1ldGhvZHMub2Zmc2V0U2xpZGVyUG9zaXRpb24ocmV2ZXJzZSk7XG5cblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdGlmKHNldHRpbmdzLmF1dG9QbGF5LmVuYWJsZSkge1xuXHRcdFx0XHRcdFx0bWV0aG9kcy5zZXRBdXRvcGxheUludGVydmFsKCk7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdH1cblx0XHRcdH0sXG5cblx0XHRcdHRvdWNoSGFuZGxlcjoge1xuXG5cdFx0XHRcdHhEb3duOiBudWxsLFxuXHRcdFx0XHR5RG93bjogbnVsbCxcblx0XHRcdFx0aGFuZGxlVG91Y2hTdGFydDogZnVuY3Rpb24oZXZ0KSB7XG5cdFx0XHRcdFx0dGhpcy54RG93biA9IGV2dC50b3VjaGVzWzBdLmNsaWVudFg7XG5cdFx0XHRcdFx0dGhpcy55RG93biA9IGV2dC50b3VjaGVzWzBdLmNsaWVudFk7XG5cdFx0XHRcdH0sXG5cdFx0XHRcdGhhbmRsZVRvdWNoTW92ZTogZnVuY3Rpb24gKGV2dCkge1xuXHRcdFx0XHRcdGlmICghdGhpcy54RG93biB8fCAhdGhpcy55RG93bikge1xuXHRcdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdHZhciB4VXAgPSBldnQudG91Y2hlc1swXS5jbGllbnRYO1xuXHRcdFx0XHRcdHZhciB5VXAgPSBldnQudG91Y2hlc1swXS5jbGllbnRZO1xuXG5cdFx0XHRcdFx0dmFyIHhEaWZmID0gdGhpcy54RG93biAtIHhVcDtcblx0XHRcdFx0XHR2YXIgeURpZmYgPSB0aGlzLnlEb3duIC0geVVwO1xuXG5cdFx0XHRcdFx0Ly8gb25seSBjb21wYXJpbmcgeERpZmZcblx0XHRcdFx0XHQvLyBjb21wYXJlIHdoaWNoIGlzIGdyZWF0ZXIgYWdhaW5zdCB5RGlmZiB0byBkZXRlcm1pbmUgd2hldGhlciBsZWZ0L3JpZ2h0IG9yIHVwL2Rvd24gIGUuZy4gaWYgKE1hdGguYWJzKCB4RGlmZiApID4gTWF0aC5hYnMoIHlEaWZmICkpXG5cdFx0XHRcdFx0aWYgKE1hdGguYWJzKCB4RGlmZiApID4gMCkge1xuXHRcdFx0XHRcdFx0aWYgKCB4RGlmZiA+IDAgKSB7XG5cdFx0XHRcdFx0XHRcdC8vIHN3aXBlIGxlZnRcblx0XHRcdFx0XHRcdFx0bWV0aG9kcy5zY3JvbGwoZmFsc2UpO1xuXHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0Ly9zd2lwZSByaWdodFxuXHRcdFx0XHRcdFx0XHRtZXRob2RzLnNjcm9sbCh0cnVlKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHQvKiByZXNldCB2YWx1ZXMgKi9cblx0XHRcdFx0XHR0aGlzLnhEb3duID0gbnVsbDtcblx0XHRcdFx0XHR0aGlzLnlEb3duID0gbnVsbDtcblx0XHRcdFx0XHRjYW5OYXZpZ2F0ZSA9IHRydWU7XG5cdFx0XHRcdH1cblx0XHRcdH0sXG5cblx0XHRcdC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcblx0XHRcdCBVdGlsaXR5IEZ1bmN0aW9uc1xuXHRcdFx0ICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG5cblx0XHRcdGdldEN1cnJlbnRJdGVtV2lkdGg6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRyZXR1cm4gKG9iamVjdC5wYXJlbnQoKS53aWR0aCgpKS9pdGVtc1Zpc2libGU7XG5cdFx0XHR9LFxuXG5cdFx0XHRvZmZzZXRJdGVtc1RvQmVnaW5uaW5nOiBmdW5jdGlvbihudW1iZXIpIHtcblx0XHRcdFx0aWYodHlwZW9mIG51bWJlciA9PT0gJ3VuZGVmaW5lZCcpIHsgbnVtYmVyID0gMSB9XG5cdFx0XHRcdGZvcih2YXIgaSA9IDA7IGkgPCBudW1iZXI7IGkrKykge1xuXHRcdFx0XHRcdG9iamVjdC5jaGlsZHJlbigpLmxhc3QoKS5pbnNlcnRCZWZvcmUob2JqZWN0LmNoaWxkcmVuKCkuZmlyc3QoKSk7XG5cdFx0XHRcdH1cblx0XHRcdH0sXG5cblx0XHRcdG9mZnNldEl0ZW1zVG9FbmQ6IGZ1bmN0aW9uKG51bWJlcikge1xuXHRcdFx0XHRpZih0eXBlb2YgbnVtYmVyID09PSAndW5kZWZpbmVkJykgeyBudW1iZXIgPSAxIH1cblx0XHRcdFx0Zm9yKHZhciBpID0gMDsgaSA8IG51bWJlcjsgaSsrKSB7XG5cdFx0XHRcdFx0b2JqZWN0LmNoaWxkcmVuKCkuZmlyc3QoKS5pbnNlcnRBZnRlcihvYmplY3QuY2hpbGRyZW4oKS5sYXN0KCkpO1xuXHRcdFx0XHR9XG5cdFx0XHR9LFxuXG5cdFx0XHRvZmZzZXRTbGlkZXJQb3NpdGlvbjogZnVuY3Rpb24ocmV2ZXJzZSkge1xuXHRcdFx0XHR2YXIgbGVmdCA9IHBhcnNlSW50KG9iamVjdC5jc3MoJ2xlZnQnKS5yZXBsYWNlKCdweCcsICcnKSk7XG5cdFx0XHRcdGlmIChyZXZlcnNlKSB7XG5cdFx0XHRcdFx0bGVmdCA9IGxlZnQgLSBpdGVtc1dpZHRoICogaXRlbXNUb1Njcm9sbDtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRsZWZ0ID0gbGVmdCArIGl0ZW1zV2lkdGggKiBpdGVtc1RvU2Nyb2xsO1xuXHRcdFx0XHR9XG5cdFx0XHRcdG9iamVjdC5jc3Moe1xuXHRcdFx0XHRcdCdsZWZ0JzogbGVmdFxuXHRcdFx0XHR9KTtcblx0XHRcdH0sXG5cblx0XHRcdGdldE9mZnNldFBvc2l0aW9uOiBmdW5jdGlvbigpIHtcblx0XHRcdFx0cmV0dXJuIHBhcnNlSW50KG9iamVjdC5jc3MoJ2xlZnQnKS5yZXBsYWNlKCdweCcsICcnKSk7XG5cdFx0XHR9LFxuXG5cdFx0XHRjYWxjdWxhdGVOb25JbmZpbml0ZUxlZnRTY3JvbGw6IGZ1bmN0aW9uKHRvU2Nyb2xsKSB7XG5cblx0XHRcdFx0bWV0aG9kcy5jbGVhckRpc2FibGVkKCk7XG5cdFx0XHRcdGlmKG1ldGhvZHMuZ2V0T2Zmc2V0UG9zaXRpb24oKSArIHRvU2Nyb2xsID49IDApIHtcblx0XHRcdFx0XHQkKHNldHRpbmdzLm5hdmlnYXRpb25UYXJnZXRTZWxlY3RvcikuZmluZChcIi5uYnMtZmxleGlzZWwtbmF2LWxlZnRcIikuYWRkQ2xhc3MoJ2Rpc2FibGVkJyk7XG5cdFx0XHRcdFx0cmV0dXJuIDA7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0cmV0dXJuIG1ldGhvZHMuZ2V0T2Zmc2V0UG9zaXRpb24oKSArIHRvU2Nyb2xsO1xuXHRcdFx0XHR9XG5cdFx0XHR9LFxuXG5cdFx0XHRjYWxjdWxhdGVOb25JbmZpbml0ZVJpZ2h0U2Nyb2xsOiBmdW5jdGlvbih0b1Njcm9sbCl7XG5cblx0XHRcdFx0bWV0aG9kcy5jbGVhckRpc2FibGVkKCk7XG5cdFx0XHRcdHZhciBuZWdhdGl2ZU9mZnNldExpbWl0ID0gKGl0ZW1Db3VudCAqIGl0ZW1zV2lkdGgpIC0gKGl0ZW1zVmlzaWJsZSAqIGl0ZW1zV2lkdGgpO1xuXG5cdFx0XHRcdGlmKG1ldGhvZHMuZ2V0T2Zmc2V0UG9zaXRpb24oKSAtIHRvU2Nyb2xsIDw9IC1uZWdhdGl2ZU9mZnNldExpbWl0KSB7XG5cdFx0XHRcdFx0JChzZXR0aW5ncy5uYXZpZ2F0aW9uVGFyZ2V0U2VsZWN0b3IpLmZpbmQoXCIubmJzLWZsZXhpc2VsLW5hdi1yaWdodFwiKS5hZGRDbGFzcygnZGlzYWJsZWQnKTtcblx0XHRcdFx0XHRyZXR1cm4gLW5lZ2F0aXZlT2Zmc2V0TGltaXQ7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0cmV0dXJuIG1ldGhvZHMuZ2V0T2Zmc2V0UG9zaXRpb24oKSAtIHRvU2Nyb2xsO1xuXHRcdFx0XHR9XG5cdFx0XHR9LFxuXG5cdFx0XHRzZXRBdXRvcGxheUludGVydmFsOiBmdW5jdGlvbigpe1xuXHRcdFx0XHRhdXRvUGxheUludGVydmFsID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0aWYgKGNhbk5hdmlnYXRlKSB7XG5cdFx0XHRcdFx0XHRtZXRob2RzLnNjcm9sbChmYWxzZSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9LCBzZXR0aW5ncy5hdXRvUGxheS5pbnRlcnZhbCk7XG5cdFx0XHR9LFxuXG5cdFx0XHRjbGVhckRpc2FibGVkOiBmdW5jdGlvbigpIHtcblx0XHRcdFx0dmFyIHBhcmVudCA9ICQoc2V0dGluZ3MubmF2aWdhdGlvblRhcmdldFNlbGVjdG9yKTtcblx0XHRcdFx0cGFyZW50LmZpbmQoXCIubmJzLWZsZXhpc2VsLW5hdi1sZWZ0XCIpLnJlbW92ZUNsYXNzKCdkaXNhYmxlZCcpO1xuXHRcdFx0XHRwYXJlbnQuZmluZChcIi5uYnMtZmxleGlzZWwtbmF2LXJpZ2h0XCIpLnJlbW92ZUNsYXNzKCdkaXNhYmxlZCcpO1xuXHRcdFx0fVxuXG5cdFx0fTtcblxuXHRcdGlmIChtZXRob2RzW29wdGlvbnNdKSB7ICAgICAvLyAkKFwiI2VsZW1lbnRcIikucGx1Z2luTmFtZSgnbWV0aG9kTmFtZScsICdhcmcxJywgJ2FyZzInKTtcblx0XHRcdHJldHVybiBtZXRob2RzW29wdGlvbnNdLmFwcGx5KHRoaXMsIEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMSkpO1xuXHRcdH0gZWxzZSBpZiAodHlwZW9mIG9wdGlvbnMgPT09ICdvYmplY3QnIHx8ICFvcHRpb25zKSB7ICAgICAvLyAkKFwiI2VsZW1lbnRcIikucGx1Z2luTmFtZSh7IG9wdGlvbjogMSwgb3B0aW9uOjIgfSk7XG5cdFx0XHRyZXR1cm4gbWV0aG9kcy5pbml0LmFwcGx5KHRoaXMpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHQkLmVycm9yKCAnTWV0aG9kIFwiJyArICBtZXRob2QgKyAnXCIgZG9lcyBub3QgZXhpc3QgaW4gZmxleGlzZWwgcGx1Z2luIScpO1xuXHRcdH1cblx0fTtcblxufSkoalF1ZXJ5KTsiXX0=
